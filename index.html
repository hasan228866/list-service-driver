<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daftar Driver</title>
    <link rel="stylesheet" href="style.css">
    <style>
        /* Existing styles */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .menu-icon {
            position: fixed;
            top: 10px;
            left: 10px;
            width: 30px;
            height: 30px;
            cursor: pointer;
            z-index: 1000;
        }

        .menu-icon div {
            width: 30px;
            height: 4px;
            background: black;
            margin: 5px 0;
        }

        .side-menu {
            position: fixed;
            top: 0;
            left: -200px;
            width: 200px;
            height: 100%;
            background: #333;
            color: white;
            box-shadow: 2px 0 5px rgba(0, 0, 0, 0.5);
            transition: left 0.3s ease;
            z-index: 999;
        }

        .side-menu.open {
            left: 0;
        }

        .side-menu ul {
            list-style: none;
            padding: 20px;
            margin: 0;
        }

        .side-menu ul li {
            padding: 15px;
            cursor: pointer;
            background: #444;
            margin: 5px 0;
            border-radius: 5px;
            text-align: center;
        }

        .side-menu ul li:hover {
            background: #555;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            width: 90%;
            max-width: 400px;
        }

        .modal-button {
            margin: 10px;
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .modal-button:hover {
            background-color: #0056b3;
        }

        .admin-tools {
            display: none;
        }

        .order-button.disabled {
            background-color: #ccc;
            cursor: not-allowed;
        }

        .driver-list {
            margin: 20px;
        }

        .driver-card {
            border: 1px solid #ccc;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        .form-modal-content {
            width: 100%;
            max-width: 500px;
        }

        .form-input {
            display: block;
            width: 100%;
            margin: 10px 0;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }

        .submit-button {
            background-color: #28a745;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        .submit-button:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>
    <!-- Menu Icon -->
    <div class="menu-icon" onclick="toggleMenu()">
        <div></div>
        <div></div>
        <div></div>
    </div>

    <!-- Side Menu -->
    <div class="side-menu" id="side-menu">
        <ul>
            <li onclick="attemptAdminLogin()">Mode Admin</li>
            <li onclick="showMode('driver')">Mode Driver</li>
            <li><a href="more.html" style="color: white; text-decoration: none;">More</a></li>
            <li><a href="https://teer.id/han682" style="color: white; text-decoration: none;">Support Developer</a></li>
        </ul>
    </div>

    <!-- Login Modal -->
    <div class="modal" id="login-modal">
        <div class="modal-content">
            <h2>Login Admin</h2>
            <form id="login-form" onsubmit="validateLogin(event)">
                <input type="text" id="username" placeholder="Username" required>
                <input type="password" id="password" placeholder="Password" required>
                <button type="submit" class="modal-button">Login</button>
            </form>
            <button class="modal-button" onclick="closeLoginModal()">Batal</button>
        </div>
    </div>

    <!-- Admin Tools -->
    <div class="admin-tools" id="admin-tools">
        <h2>Pengaturan Ketersediaan Layanan</h2>
        <label for="driver-select">Pilih Driver:</label>
        <select id="driver-select">
            <option value="1">Driver 1</option>
            <option value="2">Driver 2</option>
        </select>
        <button onclick="toggleDriverStatus()">Ubah Status</button>
    </div>

    <!-- Driver List -->
    <div class="services-container">
        <h1>List Driver Terbaik Kami</h1>
        <div class="driver-list">
            <div class="driver-card" id="driver-1">
                <h3>Driver 1 (18thn)</h3>
                <p>Alamat: Manyaran-Semarang Barat</p>
                <p>Kendaraan: Honda Beat Merah</p>
                <p>No HP: 628895885691</p>
                <p id="status-label-1">Status: Tersedia</p>
                <button class="order-button" id="order-1" onclick="showServiceModal('Driver 1', '628895885691')">Order</button>
            </div>
        </div>
    </div>

    <!-- Service Selection Modal -->
    <div class="modal" id="service-selection-modal">
        <div class="modal-content">
            <h2>Pilih Layanan</h2>
            <button class="modal-button" onclick="selectService('Antar Jemput')">Jasa Antar Jemput</button>
            <button class="modal-button" onclick="selectService('Jasa Titip Barang')">Jasa Titip Barang</button>
            <button class="modal-button" onclick="selectService('Jasa Titip Makanan')">Jasa Titip Makanan</button>
            <button class="modal-button" onclick="closeServiceModal()">Batal</button>
        </div>
    </div>

    <!-- Service Form Modal -->
    <div class="modal" id="service-form-modal">
        <div class="modal-content form-modal-content">
            <h2>Formulir Layanan</h2>
            <form id="service-form" onsubmit="submitForm(event)">
                <div id="form-fields">
                    <!-- Fields will be populated dynamically based on service selection -->
                </div>
                <button type="submit" class="submit-button">Kirim</button>
            </form>
            <button class="modal-button" onclick="closeFormModal()">Batal</button>
        </div>
    </div>

    <script>
        const adminCredentials = {
            username: "hasan",
            password: "228866"
        };

        // Load driver availability from localStorage or default to true
        let driverAvailability = JSON.parse(localStorage.getItem("driverAvailability")) || {
            "1": true,
            "2": true
        };

        let selectedDriverName = "";
        let selectedDriverWhatsApp = "";
        let selectedService = "";

        // On page load, update driver statuses from localStorage
        window.onload = function() {
            updateDriverStatus("1");
            updateDriverStatus("2");
        };

        function toggleMenu() {
            const menu = document.getElementById("side-menu");
            menu.classList.toggle("open");
        }

        function attemptAdminLogin() {
            document.getElementById("login-modal").style.display = "flex";
        }

        function closeLoginModal() {
            document.getElementById("login-modal").style.display = "none";
            clearLoginFields();
        }

        function validateLogin(event) {
            event.preventDefault();
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            if (username === adminCredentials.username && password === adminCredentials.password) {
                showAdminTools();
            } else {
                alert("Login gagal. Periksa username dan password.");
            }
        }

        function showAdminTools() {
            document.getElementById("login-modal").style.display = "none";
            document.getElementById("admin-tools").style.display = "block";
        }

        function toggleDriverStatus() {
            const driverSelect = document.getElementById("driver-select");
            const selectedDriver = driverSelect.value;
            driverAvailability[selectedDriver] = !driverAvailability[selectedDriver];
            localStorage.setItem("driverAvailability", JSON.stringify(driverAvailability));

            updateDriverStatus(selectedDriver);
        }

        function updateDriverStatus(driverId) {
            const statusLabel = document.getElementById("status-label-" + driverId);
            const orderButton = document.getElementById("order-" + driverId);

            if (driverAvailability[driverId]) {
                statusLabel.innerText = "Status: Tersedia";
                orderButton.classList.remove("disabled");
            } else {
                statusLabel.innerText = "Status: Tidak Tersedia";
                orderButton.classList.add("disabled");
            }
        }

        function showServiceModal(driverName, driverWhatsApp) {
            selectedDriverName = driverName;
            selectedDriverWhatsApp = driverWhatsApp;
            document.getElementById("service-selection-modal").style.display = "flex";
        }

        function closeServiceModal() {
            document.getElementById("service-selection-modal").style.display = "none";
        }

        function selectService(service) {
            selectedService = service;
            document.getElementById("service-selection-modal").style.display = "none";
            showServiceForm();
        }

        function showServiceForm() {
            const formFields = document.getElementById("form-fields");

            // Clear previous form fields
            formFields.innerHTML = "";

            if (selectedService === "Antar Jemput") {
                formFields.innerHTML = `
                    <input type="text" class="form-input" name="name" placeholder="Nama Lengkap" required>
                    <input type="tel" class="form-input" name="phone" placeholder="Nomor Telepon" required>
                    <input type="text" class="form-input" name="pickup" placeholder="Alamat Jemput" required>
                    <input type="text" class="form-input" name="destination" placeholder="Alamat Tujuan" required>
                `;
            } else if (selectedService === "Jasa Titip Barang") {
                formFields.innerHTML = `
                    <input type="text" class="form-input" name="name" placeholder="Nama Lengkap" required>
                    <input type="tel" class="form-input" name="phone" placeholder="Nomor Telepon" required>
                    <input type="text" class="form-input" name="package" placeholder="Deskripsi Barang" required>
                `;
            } else if (selectedService === "Jasa Titip Makanan") {
                formFields.innerHTML = `
                    <input type="text" class="form-input" name="name" placeholder="Nama Lengkap" required>
                    <input type="tel" class="form-input" name="phone" placeholder="Nomor Telepon" required>
                    <input type="text" class="form-input" name="food" placeholder="Nama Makanan" required>
                `;
            }

            document.getElementById("service-form-modal").style.display = "flex";
        }

        function submitForm(event) {
            event.preventDefault();
            alert("Formulir telah dikirim!");
            closeFormModal();
        }

        function closeFormModal() {
            document.getElementById("service-form-modal").style.display = "none";
        }
    </script>
</body>
</html>
